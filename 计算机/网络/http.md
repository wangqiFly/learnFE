#### content-type的类型有哪些

- application/json
- multipart/form-data
- raw
- binary
- plain/text



## 缓存

- no-store

**永远都不要在客户端存储资源**，永远都去原始服务器去获取资源。

- no-cache

可以在客户端存储资源，**每次都必须去服务端做新鲜度校验**，来决定从服务端获取新的资源（200）还是使用客户端缓存（304）。也就是所谓的协商缓存。







**一、http 缓存请求相应头**

阅读本文，先大概了解这些缓存字段是必须的，后面也会细说，先留个印象。

**1.Cache-Control**
请求 / 响应头，缓存控制字段，可以说是控制 http 缓存的最高指令，要不要缓存也是它说了算。

它有以下常用值

**1.1 no-store：所有内容都不缓存**

**1.2 no-cache：缓存，但是浏览器使用缓存前，都会请求服务器判断缓存资源是否是最新，它是个比较高贵的存在，因为它只用不过期的缓存。**

**1.3 max-age=x(单位秒) 请求缓存后的 X 秒不再发起请求，属于 http1.1 属性，与下方**Expires(http1.0 属性) 类似，但优先级要比 ****Expires 高。********

**1.4 s-maxage=x(单位秒) 代理服务器请求源站缓存后的 X 秒不再发起请求，只对 CDN 缓存有效 (这个在后面会细说)**

**1.5 public 客户端和代理服务器 (CDN) 都可缓存**

**1.6 private 只有客户端可以缓存**

**2.Expires**
响应头，代表资源过期时间，由服务器返回提供，GMT 格式日期，是 http1.0 的属性，在与 max-age(http1.1) 共存的情况下，优先级要低。
**3.Last-Modified**
响应头，资源最新修改时间，由服务器告诉浏览器。
**4.if-Modified-Since**
请求头，资源最新修改时间，由浏览器告诉服务器 (其实就是上次服务器给的 Last-Modified，请求又还给服务器对比)，和 Last-Modified 是一对，它两会进行对比**。**
**5.Etag**
响应头，资源标识，由服务器告诉浏览器。
**6.if-None-Match**
请求头，缓存资源标识，由浏览器告诉服务器 (其实就是上次服务器给的 Etag)，和 Etag 是一对，它两会进行对比

## 返回码

500 内部错误

504*错误代表网关超时（Gateway timeout）



**6. 强缓存与协商性缓存 (弱缓存)**

了解了上面不同浏览器行为对 http 缓存的不同影响，理解强缓存与协商性缓存就很容易了。

**强缓存：** 不发起 http 请求，直接使用本地缓存，比如浏览器地址栏回车，使用浏览器的刷新按钮，在 Expires 或 max-age 生效的情况下，触发的都是强缓存。

**协商性缓存 (弱缓存)：** 在使用本地缓存前，先与服务器协商，核对缓存文件是否为最新。比如设置了 cache-control=no-cache，不管你做任何操作，都会发起请求，这一类就是协商性缓存了。